<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Incremental – 1v1 en ligne (Firebase)</title>
<link rel="stylesheet" href="styles.css" />
</head>
<body>
<header>
  <h1>Incremental 1v1</h1>
  <div class="stat" id="goldStat">Or: 1</div>
  <div class="stat" id="incomeStat">Revenu/tour: 0</div>
  <div class="stat" id="turnStat">Tour: 0</div>
  <div class="stat" id="mpRole">Solo</div>
</header>

<main class="layout">
  <!-- LEFT: MAP -->
  <section class="board-wrap">
    <div class="row topbar">
      <div class="muted">Carte (conquête via <b>fantassins</b>)</div>
      <div class="muted">Grille: <span id="gridSizeLabel">10×10</span></div>
    </div>
    <div id="board" class="board" role="grid" aria-label="Plateau"></div>
    <div class="small" style="margin-top:8px; color:#9aa4b2">
      🏰 J1 à droite • 🏯 J2 à gauche
    </div>
  </section>

  <!-- RIGHT: ECONOMY & MULTIPLAYER -->
  <aside style="display:grid; gap:14px; height:fit-content">
    <div class="card">
      <h3>Multijoueur (1v1)</h3>
      <div class="muted small" style="margin-bottom:8px">
        <b>Créer</b> génère un code à 4 chiffres. Ton ami <b>Rejoint</b> avec ce code.
      </div>
      <div class="row">
        <button class="btn" id="createBtn">Créer</button>
        <input class="btn" id="roomInput" placeholder="Code 4 chiffres" maxlength="4" />
        <button class="btn" id="joinBtn">Rejoindre</button>
      </div>
      <div class="small muted" id="roomInfo">Hors ligne (solo)</div>
      <div class="small muted" style="margin-top:6px">
        Les tours sont alternés (J1 puis J2). Les économies sont séparées.
      </div>
    </div>

    <div class="card">
      <h3>Phase d’achats</h3>
      <div class="muted small" style="margin-bottom:8px">
        Les <b>paysans</b> remplissent des <b>champs</b> (ci-dessous). Chaque champ rapporte <b>1 or / tour</b>.
      </div>
      <div class="row">
        <button class="btn" id="buyPeasant">Acheter paysan (1 or)</button>
        <span class="small muted" id="peasantCount">0 paysan</span>
      </div>
      <div class="muted small" style="margin:8px 0 6px">Champs (capacité <span id="farmCapLabel">30</span>)</div>
      <div id="farmGrid" class="farm-grid"></div>
    </div>

    <div class="card">
      <h3>Armée (optionnel)</h3>
      <div class="muted small" style="margin-bottom:8px">
        Les <b>fantassins</b> tentent des captures à la fin de chaque tour.
      </div>
      <div class="row">
        <button class="btn" id="buyFootman">Acheter fantassin (10 or)</button>
        <span class="small muted" id="footmanCount">0 fantassin</span>
      </div>
      <div class="small muted">Proba capture: neutre 65% • vs ennemi 40%</div>
    </div>

    <div class="card">
      <h3>Paramètres</h3>
      <label class="small muted">Taille de la grille</label>
      <div class="row">
        <input id="sizeInput" type="number" min="7" max="25" value="10" class="btn" style="width:100%">
        <button class="btn" id="resizeBtn">Redimensionner</button>
      </div>
    </div>

    <div class="card">
      <h3>Tour</h3>
      <div class="row">
        <button class="btn primary" id="stepBtn">⏭ Fin du tour</button>
        <button class="btn" id="resetBtn">⟲ Reset</button>
      </div>
      <div id="logBox" class="small log">—</div>
    </div>
  </aside>
</main>

<script type="module" src="firebase-config.sample.js"></script>
<script type="module" src="game.js"></script>
</body>
</html>
